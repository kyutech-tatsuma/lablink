{"ast":null,"code":"import _regeneratorRuntime from\"/Users/furuyatatsuma/Desktop/lablink/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/furuyatatsuma/Desktop/lablink/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _createForOfIteratorHelper from\"/Users/furuyatatsuma/Desktop/lablink/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/furuyatatsuma/Desktop/lablink/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/furuyatatsuma/Desktop/lablink/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import axios from'axios';import MembersinAdmin from\"./MembersinAdmin\";import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(_ref){var baseurl=_ref.baseurl;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),update=_useState2[0],setUpdate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var updatetarget=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var usersResponse,users,_iterator,_step,user,updatedUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.next=4;return axios.get(\"\".concat(baseurl,\"/user\"));case 4:usersResponse=_context.sent;users=usersResponse.data;_iterator=_createForOfIteratorHelper(users);_context.prev=7;_iterator.s();case 9:if((_step=_iterator.n()).done){_context.next=17;break;}user=_step.value;if(!(user.id!==1)){_context.next=15;break;}updatedUser=_objectSpread(_objectSpread({},user),{},{target:user.target+1});_context.next=15;return axios.post(\"\".concat(baseurl,\"/user/update/\").concat(user.id),updatedUser);case 15:_context.next=9;break;case 17:_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](7);_iterator.e(_context.t0);case 22:_context.prev=22;_iterator.f();return _context.finish(22);case 25:setUpdate(function(prevState){return!prevState;});_context.next=31;break;case 28:_context.prev=28;_context.t1=_context[\"catch\"](1);console.error(\"Error updating targets: \".concat(_context.t1));case 31:setIsLoading(false);case 32:case\"end\":return _context.stop();}},_callee,null,[[1,28],[7,19,22,25]]);}));return function updatetarget(){return _ref2.apply(this,arguments);};}();var resetreset=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var usersResponse,users,_iterator2,_step2,user,updatedUser;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setIsLoading(true);_context2.prev=1;_context2.next=4;return axios.get(\"\".concat(baseurl,\"/user\"));case 4:usersResponse=_context2.sent;users=usersResponse.data;_iterator2=_createForOfIteratorHelper(users);_context2.prev=7;_iterator2.s();case 9:if((_step2=_iterator2.n()).done){_context2.next=17;break;}user=_step2.value;if(!(user.id!==1)){_context2.next=15;break;}updatedUser=_objectSpread(_objectSpread({},user),{},{target:user.target-1});_context2.next=15;return axios.post(\"\".concat(baseurl,\"/user/update/\").concat(user.id),updatedUser);case 15:_context2.next=9;break;case 17:_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](7);_iterator2.e(_context2.t0);case 22:_context2.prev=22;_iterator2.f();return _context2.finish(22);case 25:setUpdate(function(prevState){return!prevState;});_context2.next=31;break;case 28:_context2.prev=28;_context2.t1=_context2[\"catch\"](1);console.error(\"Error updating targets: \".concat(_context2.t1));case 31:setIsLoading(false);case 32:case\"end\":return _context2.stop();}},_callee2,null,[[1,28],[7,19,22,25]]);}));return function resetreset(){return _ref3.apply(this,arguments);};}();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'white',height:'100vh',width:'100vw'}});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-sm-flex align-items-center justify-content-between mb-4\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-0 text-gray-800\",children:\"Dashboard\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 mb-4\",children:/*#__PURE__*/_jsx(MembersinAdmin,{baseurl:baseurl,update:update,setUpdate:setUpdate})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header py-3\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"m-0 font-weight-bold text-primary\",children:\"\\u7BA1\\u7406\\u8005\\u30C4\\u30FC\\u30EB\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"btn btn-success btn-icon-split\",onClick:updatetarget,children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon text-white-50\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:\"\\u6708\\u306E\\u4F1A\\u8A08\\u30EA\\u30BB\\u30C3\\u30C8\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"btn btn-danger btn-icon-split\",onClick:resetreset,children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon text-white-50\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:\"\\u30EA\\u30BB\\u30C3\\u30C8\\u53D6\\u308A\\u6D88\\u3057\"})]})})]})})]})]})});};export default Admin;","map":{"version":3,"names":["React","axios","MembersinAdmin","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Admin","_ref","baseurl","_useState","_useState2","_slicedToArray","update","setUpdate","_useState3","_useState4","isLoading","setIsLoading","updatetarget","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","usersResponse","users","_iterator","_step","user","updatedUser","wrap","_callee$","_context","prev","next","get","concat","sent","data","_createForOfIteratorHelper","s","n","done","value","id","_objectSpread","target","post","t0","e","f","finish","prevState","t1","console","error","stop","apply","arguments","resetreset","_ref3","_callee2","_iterator2","_step2","_callee2$","_context2","style","backgroundColor","height","width","children","className","onClick"],"sources":["/Users/furuyatatsuma/Desktop/lablink/src/Admin.js"],"sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport MembersinAdmin from \"./MembersinAdmin\";\nimport { useState } from 'react';\n\nconst Admin = ({ baseurl }) => {\n    const [update, setUpdate] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    const updatetarget = async () => {\n        setIsLoading(true);\n        try {\n            const usersResponse = await axios.get(`${baseurl}/user`);\n            const users = usersResponse.data;\n            for (const user of users) {\n                if (user.id !== 1) {\n                    const updatedUser = { ...user, target: user.target + 1 };\n                    await axios.post(`${baseurl}/user/update/${user.id}`, updatedUser);\n                }\n            }\n            setUpdate(prevState => !prevState);\n        } catch (error) {\n            console.error(`Error updating targets: ${error}`);\n        }\n        setIsLoading(false);\n    };\n\n    const resetreset = async () => {\n        setIsLoading(true);\n        try {\n            const usersResponse = await axios.get(`${baseurl}/user`);\n            const users = usersResponse.data;\n            for (const user of users) {\n                if (user.id !== 1) {\n                    const updatedUser = { ...user, target: user.target - 1 };\n                    await axios.post(`${baseurl}/user/update/${user.id}`, updatedUser);\n                }\n            }\n            setUpdate(prevState => !prevState);\n        } catch (error) {\n            console.error(`Error updating targets: ${error}`);\n        }\n        setIsLoading(false);\n    }\n    if (isLoading) {\n        return <div style={{ backgroundColor: 'white', height: '100vh', width: '100vw' }} />;\n    }\n    return (\n        <>\n            <div className=\"container-fluid\">\n\n                {/* <!-- Page Heading --> */}\n                <div className=\"d-sm-flex align-items-center justify-content-between mb-4\">\n                    <h1 className=\"h3 mb-0 text-gray-800\">Dashboard</h1>\n                </div>\n                {/* <!-- Content Row --> */}\n\n\n                {/* <!-- Content Row --> */}\n                <div className=\"row\">\n                    {/* <!-- Content Column --> */}\n                    <div className=\"col-lg-6 mb-4\">\n\n                        <MembersinAdmin baseurl={baseurl} update={update} setUpdate={setUpdate} />\n\n                    </div>\n                    {/* <!-- Content Column --> */}\n                    <div className=\"col-lg-6 mb-4\">\n                        <div className=\"card shadow mb-4\">\n                            <div className=\"card-header py-3\">\n                                <h6 className=\"m-0 font-weight-bold text-primary\">管理者ツール</h6>\n                            </div>\n                            <div className=\"card-body\">\n                                <a className=\"btn btn-success btn-icon-split\" onClick={updatetarget}>\n                                    <span className=\"icon text-white-50\">\n                                        <i className=\"fas fa-check\"></i>\n                                    </span>\n                                    <span className=\"text\">月の会計リセット</span>\n                                </a>\n                            </div>\n                            <div className=\"card-body\">\n                                <a className=\"btn btn-danger btn-icon-split\" onClick={resetreset}>\n                                    <span className=\"icon text-white-50\">\n                                        <i className=\"fas fa-check\"></i>\n                                    </span>\n                                    <span className=\"text\">リセット取り消し</span>\n                                </a>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Admin;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}